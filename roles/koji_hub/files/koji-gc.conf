#test policy file
#earlier = higher precedence!

[main]
key_aliases =
    D651FF2E    fedora-2020-free
    94843C65    fedora-2020-nonfree
    158B3811    fedora-el-8-free
    BDDA8475    fedora-el-8-nonfree
    296458F3    fedora-el-9-free
    AAB212EA    fedora-el-9-nonfree
    DB85DDD7    fedora-el-10-free
    1BC7B804    fedora-el-10-nonfree
    C8D47BB7    rpmfusion-cuda-2019

unprotected_keys =
    rpmfusion-cuda-2019
    fedora-2020-free
    fedora-2020-nonfree
    fedora-el-8-free
    fedora-el-8-nonfree
    fedora-el-9-free
    fedora-el-9-nonfree
    fedora-el-10-free
    fedora-el-10-nonfree

server = https://koji.rpmfusion.org/kojihub
#serverca = /etc/koji-gc/serverca.crt
#serverca = /etc/letsencrypt/live/koji.rpmfusion.org/fullchain.pem
serverca = /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
weburl = https://koji.rpmfusion.org/koji
from_addr = RPM Fusion Koji Build System <buildsys@rpmfusion.org>
email-domain = rpmfusion.org
smtp_host = localhost

[prune]
policy =
    #stuff to protect
    #note that tags with master lock engaged are already protected
    tag *-updates :: keep
    age < 1 day :: skip
    sig fedora-2020-free && age < 12 weeks :: keep
    sig fedora-2020-nonfree && age < 12 weeks :: keep
    sig fedora-el-10-free && age < 12 weeks :: keep
    sig fedora-el-10-nonfree && age < 12 weeks :: keep
    sig fedora-el-8-free && age < 12 weeks :: keep
    sig fedora-el-8-nonfree && age < 12 weeks :: keep
    sig fedora-el-9-free && age < 12 weeks :: keep
    sig fedora-el-9-nonfree && age < 12 weeks :: keep


    #stuff to chuck semi-rapidly
    tag *-testing *-candidate *-override && order >= 2 :: untag
    tag *-override && order > 0 && age > 2 weeks :: untag
    tag *-candidate && age > 8 weeks :: untag

    #default: keep the last 3
    order > 2 :: untag

